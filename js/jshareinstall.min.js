window.ShareInstall = function(win, doc, xhr) {
    var VERSION = "1.2.1",
    ENV = "",
    ENV = "production",
    Os = (a = navigator.userAgent, {
        ios: !!a.match(/Mac OS X/),
        android: -1 < a.indexOf("Android")
    }),
    a,
    Browser = (b = navigator.userAgent, {
        wechat: -1 < b.indexOf("MicroMessenger"),
        weibo: -1 < b.toLowerCase().indexOf("weibo"),
        qq: -1 < b.indexOf("QQ/"),
        qqbrowser: -1 < b.indexOf("MQQBrowser")
    }),
    b;
    function ReadyObj() {
        this.arr = [],
        this.run = function(e) {
            this.arr ? this.arr[this.arr.length] = e: e()
        },
        this.isReady = function() {
            return null == this.arr
        },
        this.ready = function() {
            if (null != this.arr) for (var e = 0; e < this.arr.length; e++) this.arr[e]();
            this.arr = null
        }
    }
    function myAjax(t) {
        var n = new xhr,
        e = t.data,
        a = t.url,
        r = t.method;
        e && "string" != typeof e && (e = MyJSON.stringify(e)),
        "POST" != r && e && (a = a + ( - 1 < a.indexOf("?") ? "&": "?") + e, e = null),
        n.onreadystatechange = function() {
            var e;
            n.readyState == ("number" == typeof xhr.DONE ? xhr.DONE: 4) && (200 == n.status ? (e = n.response || n.responseText || {},
            t.success && t.success("string" == typeof e ? MyJSON.parse(e) : e)) : t.error && t.error(n, n.statusText), t.complete && t.complete(n))
        },
        n.open(r, a, !0),
        n.ontimeout = function() {
            t.error && t.error(n, n.statusText)
        },
        n.timeout = t.timeout || 0,
        n.setRequestHeader && n.setRequestHeader("Content-Type", "application/json;charset=utf-8"),
        n.withCredentials = (t.xhrFields || {}).withCredentials,
        n.send(e)
    }
    function httpAjax(e) {
        var t = (t = (e = e || {}).type || "GET").toUpperCase() || "GET",
        n = e.url || "",
        a = e.async,
        r = e.data || null,
        o = e.success ||
        function() {},
        i = e.fail ||
        function() {},
        l = null,
        l = XMLHttpRequest ? new XMLHttpRequest: new ActiveXObject("Microsoft.XMLHTTP"),
        c = [];
        for (var s in r) c.push(s + "=" + r[s]);
        var d = c.join("&");
        "POST" === t ? (l.open(t, n, a), l.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8"), l.send(d)) : (l.open(t, n + "?" + d, a), l.send(null)),
        l.onreadystatechange = function() {
            var e;
            4 == l.readyState && (200 <= (e = l.status) && e < 300 ? o && o(l.responseText) : i && i(e))
        }
    }
    function getContext() {
        var e = doc.createElement("canvas");
        if (e && "function" == typeof e.getContext) for (var t = ["webgl", "webgl2", "experimental-webgl2", "experimental-webgl"], n = 0; n < t.length; n++) {
            var a = t[n],
            r = e.getContext(a);
            if (r) {
                var o = {};
                o.context = a,
                o.version = r.getParameter(r.VERSION),
                o.vendor = r.getParameter(r.VENDOR),
                o.sl_version = r.getParameter(r.SHADING_LANGUAGE_VERSION),
                o.max_texture_size = r.getParameter(r.MAX_TEXTURE_SIZE);
                var i = r.getExtension("WEBGL_debug_renderer_info");
                return i && (o.vendor = r.getParameter(i.UNMASKED_VENDOR_WEBGL), o.renderer = r.getParameter(i.UNMASKED_RENDERER_WEBGL)),
                o
            }
        }
        return {}
    }
    function MyShareInstall(s, o) {
        function d(e, t) {
            var n, a, r = !1; (Browser.qq || Browser.qqbrowser) && !Browser.wechat && Os.android && (r = !0),
            r ? (n = "hidden", a = "qbrowserVisibilityChange") : void 0 !== doc.hidden ? (n = "hidden", a = "visibilitychange") : void 0 !== doc.msHidden ? (n = "msHidden", a = "msvisibilitychange") : void 0 !== doc.webkitHidden && (n = "webkitHidden", a = "webkitvisibilitychange");
            function o(e) {
                return r && e && void 0 !== e.hidden ? e.hidden: doc[n]
            }
            var i = setTimeout(function() {
                null == i || o() || (e(), i = null)
            },
            t);
            a && doc.addEventListener(a,
            function(e) {
                null != i && o(e) && (clearTimeout(i), i = null)
            },
            !1)
        }

        function t(e, t, n) {
            e = function(e) {
                var t, n = "";
                try {
                    n = e.match(/\,([^\"]*)\"/)[1] || ""
                } catch(e) {}
                return (t = MyJSON.parse(Base64.decode(n))).shareInstallCode = {
                    appkey: x,
                    timestamp: ( + new Date).toString().slice(0, 10)
                },
                Os.android ? e = '<a value="' + Base64.encode(MyJSON.stringify(t)) + '">&nbsp;</a>': e.replace(n, Base64.encode(MyJSON.stringify(t)))
            } (e);
            var a = "execCommand";
			
            if ("function" == typeof doc[a]) {
                var r = doc.createElement("div");
                r.innerHTML = e;
                for (var o, i = [], l = 0; l < r.children.length; l++) i[l] = r.children[l];
                for (var c = !1,
                s = t ? t + ((new Date).getTime() + 1e3 * (n || 1)) + "-": null, l = 0; l < i.length; l++) try {
                    var d, p, h = i[l];
                    doc.body.appendChild(h),
                    "SELECT" === h.nodeName ? h.focus() : "INPUT" === h.nodeName || "TEXTAREA" === h.nodeName ? (s && (h.value = Base64.encode(Base64.decode(h.value) + s)), (d = h.hasAttribute("readonly")) || h.setAttribute("readonly", ""), h.select(), h.setSelectionRange(0, h.value.length), d || h.removeAttribute("readonly")) : (h.hasAttribute("contenteditable") && h.focus(), s && h.setAttribute("class", s), o = win.getSelection(), (p = doc.createRange()).selectNode(h), o.removeAllRanges(), o.addRange(p)),
                   // c = doc[a]("copy"),
                    doc.body.removeChild(h)
                } catch(e) {
                    doc.body.removeChild(h),
                    c = !1
                }
                return o && o.removeAllRanges(),
                c
            }
        }
        function p() {
	
            s.apkUrl && "function" == typeof s.apkDownloadHandler ? s.apkDownloadHandler(s.apkUrl) : h.fallbackUrl && f || Os.android ? (Browser.wechat || Browser.qq || Browser.qqbrowser) && Os.android ? (h.fallbackUrl && !Browser.wechat ? S[h.schemaMethod](h.fallbackUrl) : Browser.wechat && ((0 <= h.fallbackUrl.indexOf("https://a.app.qq.com") || 0 <= h.fallbackUrl.indexOf("https://sj.app.qq.com") || 0 <= h.fallbackUrl.indexOf("https://sj.qq.com")) && h.applied ? S.loc(h.fallbackUrl) : doc.body.appendChild(f)), !Browser.qq && !Browser.qqbrowser || Browser.wechat || h.fallbackUrl || e()) : Os.android && !h.fallbackUrl ? e() : (h.fallbackMethod = "hrf", S[h.fallbackMethod](h.fallbackUrl)) : Os.ios ? Browser.wechat ? doc.body.appendChild(f) : (h.fallbackUrl.indexOf("//itunes.apple.com") < 0 && h.fallbackUrl.indexOf("https://apps.apple.com") < 0 && !h.applied && (h.fallbackUrl = "https://api.shareinstall.com.cn/pliststest/page1?app_key=" + x), S.loc(h.fallbackUrl)) : e()
        }
        function n(l, c, e) {
            docReady(function() {
                b.run(function() {
                    var e, t, n, a, r, o, i = c ? p: null;
                    l || "android" == h.platform && "qq" != h.brower && "chrome25" != h.brower && "samsung" == h.brower && (l = !0),
                    h.schemaUrl && l ? (Os.ios && -1 < h.schemaUrl.indexOf("https://") && (h.fallbackUrl.indexOf("https://itunes.apple.com") < 0 && h.fallbackUrl.indexOf("https://apps.apple.com") < 0 && (h.applied || (h.fallbackUrl = "https://api.shareinstall.com.cn/pliststest/page1?app_key=" + x)), e = "?url=" + encodeURIComponent(h.fallbackUrl), h.schemaUrl.indexOf(e) < 0 && (h.schemaUrl = h.schemaUrl + e)), t = (s || {}).timeout || h.wt || 1500, Os.ios && Browser.wechat && h.fallbackUrl.indexOf("https://itunes.apple.com") < 0 && h.fallbackUrl.indexOf("https://apps.apple.com") < 0 && (doc.body.appendChild(f), h.schemaMethod = "loc"), Os.ios && (i = null), n = h.schemaMethod, a = h.schemaUrl, r = i, o = t, Os.ios ? -1 < h.schemaUrl.indexOf("https://") || d(function() {
                        var e = h.fallbackUrl || "https://api.shareinstall.com.cn/pliststest/page1?app_key=" + x;
                        h.applied && h.applied.indexOf(".ipa") < 0 && h.applied.indexOf(".plist") < 0 && (e = h.fallbackUrl),
                        S[n](e)
                    },
                    o) : "function" == typeof r && d(r, o), S[n](a)) : i && i()
                })
            })
        }
        function a() {
            var e = localStorage.getItem("visitUUID");
            "" != e && null != e && null != e || (e = MyShareInstall.generateUUID());
            var t = (t = MyShareInstall.parseUrlParams().channel || o.channel) || null,
            n = MyShareInstall.getOsType(),
            a = "?jsonpcallback=getVisit&uid=" + e + "&appkey=" + x + "&os=" + n + "&channel=" + t + "&url=" + window.location.href + "&bid=downloadButton",
            r = document.createElement("script");
            r.type = "text/javascript",
            r.src = "https://statlog.shareinstall.com/shareinstall_log/wapclick" + a,
            document.body.appendChild(r)
        }
        function i(r, o) {
            g && (clearTimeout(g), g = null),
            (r = r || {}).v || (r.v = VERSION);
		
            var n = encode1(MyJSON.stringify(r)),
            e = MyJSON.parse(MyJSON.stringify(r));
		
            e.cus = o,
            window._SHAREINSTALLCODE || (window._SHAREINSTALLCODE = {}),
            window._SHAREINSTALLCODE[s.appKey] = encode1(MyJSON.stringify(e));
            for (var t in r) r[t];
            httpAjax({
                url: "//check.shareinstall.com.cn/wwwroot",
                type: "POST",
                data: {
                    ctype: 1,
                    appkey: x
                },
                async: !0,
                success: function(e) {
                    var t = JSON.parse(e);
			
                    MyShareInstall.domainData = t,
	
                    myAjax({
                        url: ("pre" === ENV ? "http://testwap.shareinstall.com/eshareinstall/wap.h": MyShareInstall.domainData.Url1) + "?code=" + n,
                        method: "POST",
                        xhrFields: {
                            withCredentials: !0
                        },
                        data: o,
                        success: function(e) {						
							console.log(e);
                            var t, n, a;
                            0 == e.status ? (t = e.data && e.data.length ? e.data[0] : {},
                            h = function(e) {
                                var t = {
                                    sm: "schemaMethod",
                                    st: "schemaTimeout",
                                    fm: "fallbackMethod",
                                    au: "apkUrl",
                                    acl: "allowClickLog",
                                    p: "pb"
                                };
                                for (var n in e) {
                                    var a = t[n];
                                    a && (e[a] = e[n], delete e[n])
                                }
                                return e
                            } (t), MyShareInstall.isBigUser = h.isbiguser, Os.ios && 9 < MyShareInstall.getOsVersion().split(".")[0] && h.generalUrl && (h.schemaUrl = h.generalUrl)) : (h = {},
                            "{}" == JSON.stringify(o) ? h.fallbackUrl = h.schemaUrl = "https://www.shareinstall.com.cn/no-param.html": (h.fallbackUrl = s.fallback_Url? s.fallback_Url: "https://www.shareinstall.com.cn/error.html", h.schemaUrl = s.fallback_Url? s.fallback_Url:"https://www.shareinstall.com.cn/error.html"), h.fallbackMethod = "frm", h.schemaMethod = "loc", s.fallbackDownloadHandler(), console.log("%cå¦‚æžœçœ‹åˆ°æ­¤æ¡Logï¼Œè¯æ˜Žé›†æˆæ²¡æœ‰å®Œæˆ", "color:red;"), console.log("%cè¯·å…ˆæŽ’æŸ¥ä»¥ä¸‹äº‹é¡¹ï¼Œå¦‚ä»æœªæˆåŠŸï¼Œè¯·è”ç³»æŠ€æœ¯äººå‘˜ååŠ©ï¼š", "color:red;"), console.log("%c1ã€è¯·ç¡®ä¿è‡ªå®šä¹‰å‚æ•°ä¸ä¸ºç©º", "background:#222;color:#bada55;"), console.log("%c2ã€H5å’Œappåº”ç”¨ä¸­çš„appkeyä¸Žåˆ›å»ºè‡ªåŠ¨ç”Ÿæˆçš„appkeyä¸€è‡´", "background:#222;color:#bada55;"), console.log("%c3ã€é›†æˆSDKçš„åŒ…æ˜¯å¦å·²åœ¨åº”ç”¨é›†æˆçš„ç¬¬äºŒæ­¥å®ŒæˆåŒ…ä¸Šä¼ ", "background:#222;color:#bada55;"), console.log("%c4ã€è¯·ä¿è¯å½“å‰æµ‹è¯•ä½¿ç”¨çš„æ‰‹æœº(æ¨¡æ‹Ÿå™¨)ç³»ç»Ÿå®Œæˆäº†ç¬¬3æ­¥", "background:#222;color:#bada55;")),
                            h.applied && (0 < h.applied.indexOf(".ipa") || 0 < h.applied.indexOf(".plist") ? h.fallbackUrl = "https://api.shareinstall.com.cn/pliststest/page1?app_key=" + x: h.fallbackUrl = h.applied),
                            e.shadow = s.shadow || e.shadow || "<div id='ShareInstallDom' style='font-size:30px;color:#fff;text-align:right;position:fixed;left:0;top:0;background:rgba(0,0,0,0.5);filter:alpha(opacity=50);width:100%;height:100%;z-index:10000;'><img src='//imgmini.eastday.com/shareinstall/admin/assets/1530617476_tip-icon.png' alt='' style='width:60%;margin-top:20px;'></div>",
                            e.shadow && (n = e.shadow, (a = doc.createElement("div")).innerHTML = n, (a = a.children[0]).onclick = function() {
                                doc.body.removeChild(a)
                            },
                            f = a),
                            b.ready(),
                            h.ttl && (g = setTimeout(function() {
                                i(r, o)
                            },
                            1e3 * h.ttl))
                        }
                    })
                },
                fail: function() {s.fallbackDownloadHandler();}
            })
        }
        function e() {
            var e = document.createElement("script"),
            t = document.createElement("script"),
            n = ("pre" === ENV ? "http://testwap.shareinstall.com/eshareinstall/apk.h": MyShareInstall.domainData.Url2) + "?jsonpcallback=getShareApk&code=" + window._SHAREINSTALLCODE[s.appKey];
            1 == MyShareInstall.isBigUser && (n = ("pre" === ENV ? "https://test-vipclient.shareinstall.com.cn/eshareinstall/apk.h": "https://vipclient.shareinstall.com.cn/eshareinstall/apk.h") + "?jsonpcallback=getShareApk&code=" + window._SHAREINSTALLCODE[s.appKey]),
            e.type = "text/javascript",
            e.src = n,
            t.type = "text/javascript",
            t.innerHTML = 'function getShareApk(info) {var iframe = document.createElement("iframe");iframe.style.display = "none";iframe.style.visibility = "hidden"; var downloadUrl = info.data[0]["fallbackUrl"]; iframe.src = downloadUrl; document.body.appendChild(iframe);}',
            document.body.appendChild(t),
            document.body.appendChild(e)
        }
        var h, f, r, l, c, u, m, g, y = (s = s || {}).channelCode,
        x = s.appKey || "",
        w = s.onready,
        b = new ReadyObj,
        v = this;
        y || (m = /[\?\&]channelCode=([^=&]+)/.exec(win.location.href)) && (y = m[1]),
        "function" == typeof w && b.run(function() {
            w.call(v)
        });
        try {
            r = win.screen.width || "",
            l = win.screen.height || "",
            u = win.devicePixelRatio === parseInt(win.devicePixelRatio) ? parseFloat(win.devicePixelRatio).toFixed(1) || "": parseFloat(win.devicePixelRatio).toString() || "",
            c = getContext()
        } catch(e) {}
        0 < u.indexOf(".") && (r = Math.floor(Math.floor(r * win.devicePixelRatio) / win.devicePixelRatio), l = Math.floor(Math.floor(l * win.devicePixelRatio) / win.devicePixelRatio));
        var S = {
            frm: function(e) {
                var t = doc.createElement("iframe");
                t.style.display = "none",
                t.style.visibility = "hidden",
                t.src = e,
                doc.body.appendChild(t)
            },
            loc: function(e) {
                win.location = e
            },
            hrf: function(e) {
                var t = doc.createElement("a");
                t.style.display = "none",
                t.href = e,
                doc.body.appendChild(t),
                t.click()
            },
            inhrf: function(e) {
                var t = doc.createElement("script");
                t.setAttribute("type", "text/javascript"),
                t.innerHTML = '(function(){var a = document.createElement("a");a.style.display = "none";a.href = "' + e.replace(/"/g, '\\"') + '";document.body.appendChild(a);a.click();})()',
                doc.body.appendChild(t)
            },
            open: function(e) {
                win.open(e)
            }
        };
        this.wakeupOrInstall = function(e) {
            MyShareInstall.logAjax(n, e, s),
            a(),
            h.pb && t(h.pb, h.ypp, parseInt(h.yps || "0"))
        },
        this.schemeWakeup = function(e) {
            a(),
            n(!0, !1)
        },
        this.install = function(e) {
            n(!1, !0),
            a(),
            h.pb && t(h.pb, h.ypp, parseInt(h.yps || "0"))
        },
        s.buttonId && docReady(function() {
            for (var e = s.buttonId.split(" "), t = 0; t < e.length; t++) {
                var n = doc.getElementById(e[t]);
                n && n.addEventListener("click",
                function() {
                    v.wakeupOrInstall()
                })
            }
        }),
        init(function(e) {
            e = e || [];
		
            var t = ShareInstall.getOsType(),
            n = ShareInstall.getOsVersion();
            window.logData = "sw=" + (r || 0) + "&sh=" + (l || 0) + "&sp=" + u + "&gv=" + (c.version || "") + "&gr=" + (c.renderer || "") + "&li=" + (e.length ? e.join("-") : "") + "&os=" + t + "&osver=" + n + "&appkey=" + x + "&v=" + VERSION + "&cpp=jssdk&cp=" + JSON.stringify(o),
            i({
                channelCode: y || "",
                sw: r.toString() || "0",
                sh: l.toString() || "0",
                sp: u,
                gv: c.version ? c.version.replace(/\s/g, "") : "",
                gr: c.renderer ? c.renderer.replace(/\s/g, "") : "",
                li: e.length ? e.join("-") : "",
                c: 1,
                apk: s.apkFileName || "",
                pw: s.preferWakeup ? 1 : 0,
                os: t,
                osver: n,
                appkey: x,
                channel: o.channel || ""
            },
            o),
            function() {
                var e = localStorage.getItem("visitUUID");
                "" != e && null != e && null != e || (e = function() {
                    var n = (new Date).getTime();
                    window.performance && "function" == typeof window.performance.now && (n += performance.now());
                    var e = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
                    function(e) {
                        var t = (n + 16 * Math.random()) % 16 | 0;
                        return n = Math.floor(n / 16),
                        ("x" == e ? t: 3 & t | 8).toString(16)
                    });
                    return localStorage.setItem("visitUUID", e),
                    e
                } ());
                var t = (t = o.channel) || null,
                n = ShareInstall.getOsType(),
                a = "?jsonpcallback=getVisit&uid=" + e + "&appkey=" + x + "&os=" + n + "&channel=" + t + "&url=" + window.location.href,
                r = document.createElement("script");
                r.type = "text/javascript",
                r.src = "https://statlog.shareinstall.com/shareinstall_log/wapopen" + a,
                document.body.appendChild(r)
            } (),
            this.getVisit = function(e) {
                e.status
            }
        })
    }
    var b64 = (Wb = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=", [function(e) {
        if (!e) return "";
        for (var t = Zb(e), n = t.length, a = 0; a < n; a++) t[a] = 150 ^ t[a];
        return Xb(t)
    },
    function(e) {
        if (!e) return "";
        for (var t = Yb(e), n = 0, a = t.length; n < a; n++) t[n] = 150 ^ t[n];
        return $b(t)
    },
    function(e) {
        return e ? Xb(Zb(e)) : ""
    },
    function(e) {
        return e ? $b(Yb(e)) : ""
    }]),
    Wb;
    function Xb(e) {
        for (var t, n, a, r = -1,
        o = e.length,
        i = [0, 0, 0, 0], l = []; ++r < o;) t = e[r],
        n = e[++r],
        i[0] = t >> 2,
        i[1] = (3 & t) << 4 | (n || 0) >> 4,
        o <= r ? i[2] = i[3] = 64 : (a = e[++r], i[2] = (15 & n) << 2 | (a || 0) >> 6, i[3] = o <= r ? 64 : 63 & a),
        l.push(Wb.charAt(i[0]), Wb.charAt(i[1]), Wb.charAt(i[2]), Wb.charAt(i[3]));
        return l.join("")
    }
    function Yb(e) {
        for (var t, n, a, r, o, i, l = [], c = 0; c < e.length;) t = Wb.indexOf(e.charAt(c++)) << 2 | (r = Wb.indexOf(e.charAt(c++))) >> 4,
        n = (15 & r) << 4 | (o = Wb.indexOf(e.charAt(c++))) >> 2,
        a = (3 & o) << 6 | (i = Wb.indexOf(e.charAt(c++))),
        l.push(t),
        64 != o && l.push(n),
        64 != i && l.push(a);
        return l
    }
    function Zb(e) {
        var t, n = -1,
        a = e.length,
        r = [];
        if (/^[\x00-\x7f]*$/.test(e)) for (; ++n < a;) r.push(e.charCodeAt(n));
        else for (; ++n < a;)(t = e.charCodeAt(n)) < 128 ? r.push(t) : t < 2048 ? r.push(63 & t | 128) : r.push(t >> 12 | 224, t >> 6 & 63 | 128, 63 & t | 128);
        return r
    }
    function $b(e) {
        for (var t, n, a = 0,
        r = [], o = 0; o < e.length;)(t = e[o]) < 128 ? (r.push(String.fromCharCode(t)), o++) : 191 < t && t < 224 ? (a = e[o + 1], r.push(String.fromCharCode((31 & t) << 6 | 63 & a)), o += 2) : (a = e[o + 1], n = e[o + 2], r.push(String.fromCharCode((15 & t) << 12 | (63 & a) << 6 | 63 & n)), o += 3);
        return r.join("")
    }
    var Base64 = {
        _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        encode: function(e) {
            var t, n, a, r, o, i, l, c = "",
            s = 0;
            for (e = Base64._utf8_encode(e); s < e.length;) r = (t = e.charCodeAt(s++)) >> 2,
            o = (3 & t) << 4 | (n = e.charCodeAt(s++)) >> 4,
            i = (15 & n) << 2 | (a = e.charCodeAt(s++)) >> 6,
            l = 63 & a,
            isNaN(n) ? i = l = 64 : isNaN(a) && (l = 64),
            c = c + this._keyStr.charAt(r) + this._keyStr.charAt(o) + this._keyStr.charAt(i) + this._keyStr.charAt(l);
            return c
        },
        decode: function(e) {
            var t, n, a, r, o, i, l = "",
            c = 0;
            for (e = e.replace(/[^A-Za-z0-9+/=]/g, "");
            c < e.length;) t = this._keyStr.indexOf(e.charAt(c++)) << 2 | (r = this._keyStr.indexOf(e.charAt(c++))) >> 4,
            n = (15 & r) << 4 | (o = this._keyStr.indexOf(e.charAt(c++))) >> 2,
            a = (3 & o) << 6 | (i = this._keyStr.indexOf(e.charAt(c++))),
            l += String.fromCharCode(t),
            64 != o && (l += String.fromCharCode(n)),
            64 != i && (l += String.fromCharCode(a));
            return l = Base64._utf8_decode(l)
        },
        _utf8_encode: function(e) {
            e = e.replace(/\r\n/g, "n");
            for (var t = "",
            n = 0; n < e.length; n++) {
                var a = e.charCodeAt(n);
                a < 128 ? t += String.fromCharCode(a) : (127 < a && a < 2048 ? t += String.fromCharCode(a >> 6 | 192) : (t += String.fromCharCode(a >> 12 | 224), t += String.fromCharCode(a >> 6 & 63 | 128)), t += String.fromCharCode(63 & a | 128))
            }
            return t
        },
        _utf8_decode: function(e) {
            for (var t = "",
            n = 0,
            a = c1 = c2 = 0; n < e.length;)(a = e.charCodeAt(n)) < 128 ? (t += String.fromCharCode(a), n++) : 191 < a && a < 224 ? (c2 = e.charCodeAt(n + 1), t += String.fromCharCode((31 & a) << 6 | 63 & c2), n += 2) : (c2 = e.charCodeAt(n + 1), c3 = e.charCodeAt(n + 2), t += String.fromCharCode((15 & a) << 12 | (63 & c2) << 6 | 63 & c3), n += 3);
            return t
        }
    },
    encode1 = b64[0],
    decode1 = b64[1],
    encode2 = b64[2],
    decode2 = b64[3],
    docReady = (md = [], nd = !1, od = !1,
    function(e, t) {
        nd ? e(t) : (md.push({
            fn: e,
            ctx: t
        }), "complete" === doc.readyState || !doc.attachEvent && "interactive" === doc.readyState ? pd() : od || (doc.addEventListener ? (doc.addEventListener("DOMContentLoaded", pd, !1), win.addEventListener("load", pd, !1)) : (doc.attachEvent("onreadystatechange", qd), win.attachEvent("onload", pd)), od = !0))
    }),
    md,
    nd,
    od;
    function pd() {
        if (!nd) {
            nd = !0;
            for (var e = 0; e < md.length; e++) md[e].fn.call(win, md[e].ctx);
            md = []
        }
    }
    function qd() {
        "complete" === doc.readyState && pd()
    }
    var init = function() {
        var e, t, n, l = {},
        c = [],
        a = new ReadyObj,
        r = setInterval(function() {
            t && t.localDescription && t.localDescription.sdp && n != t.localDescription.sdp && o(n = t.localDescription.sdp)
        },
        10);
        function s() {
            a.isReady() || (a.ready(), clearInterval(r), t && t.close())
        }
        function o(e) {
            for (var t, n, a, r, o = e.split("\r\n"), i = 0; i < o.length; i++) {
                if (n = (t = o[i]).split(" "), 0 == t.indexOf("a=candidate:") && (a = n[7]) && "host" == a) r = n[4];
                else if (0 == t.indexOf("a=rtcp:") && (a = n[2]) && "IP4" == a) r = n[3];
                else if (0 != t.indexOf("c=") || !(a = n[1]) || "IP4" != a || !(r = n[2])) continue;
                r && !l[r] && /[0-9]{1,3}(\.[0-9]{1,3}){3}/.test(r) && "0.0.0.0" != r && 0 != r.indexOf("127.") && 3758096384 != (4026531840 &
                function(e) {
                    for (var t = e.split("."), n = 0, a = 0; a < t.length; a++) n = n << 8 | 255 & parseInt(t[a]);
                    return n
                } (r)) && (l[r] = 1, c.push(r))
            }
            c.length && s()
        }
        try { (e = win.RTCPeerConnection || win.mozRTCPeerConnection || win.webkitRTCPeerConnection) ? ((t = new e({
                iceServers: []
            },
            {
                optional: [{
                    RtpDataChannels: !0
                }]
            })).onicecandidate = function(e) {
                e.candidate && e.candidate.candidate && o("a=" + e.candidate.candidate)
            },
            t.createDataChannel("shareinstall"), t.createOffer(function(e) {
                try {
                    t.setLocalDescription(e,
                    function() {},
                    s)
                } catch(e) {
                    s()
                }
            },
            s), setTimeout(s, 100)) : s()
        } catch(e) {
            s()
        }
        return function(e) {
            a.run(function() {
                e(c)
            })
        }
    } (),
    MyJSON = win.JSON || {
        parse: function(str) {
            return eval("(" + str + ")")
        },
        stringify: (Ud = Object.prototype.toString, Vd = Array.isArray ||
        function(e) {
            return "[object Array]" === Ud.call(e)
        },
        Wd = {
            '"': '\\"',
            "\\": "\\\\",
            "\b": "\\b",
            "\f": "\\f",
            "\n": "\\n",
            "\r": "\\r",
            "\t": "\\t"
        },
        Yd = /[\\"\u0000-\u001F\u2028\u2029]/g,
        function e(t) {
            if (null == t) return "null";
            if ("number" == typeof t) return isFinite(t) ? t.toString() : "null";
            if ("boolean" == typeof t) return t.toString();
            if ("object" == typeof t) {
                if ("function" == typeof t.toJSON) return e(t.toJSON());
                if (Vd(t)) {
                    for (var n = "[",
                    a = 0; a < t.length; a++) n += (a ? ", ": "") + e(t[a]);
                    return n + "]"
                }
                if ("[object Object]" === Ud.call(t)) {
                    var r = [];
                    for (var o in t) t.hasOwnProperty(o) && r.push(e(o) + ": " + e(t[o]));
                    return "{" + r.sort().join(", ") + "}"
                }
            }
            return '"' + t.toString().replace(Yd, Xd) + '"'
        })
    },
    Ud,
    Vd,
    Wd,
    Yd;
    function Xd(e) {
        return Wd[e] || "\\u" + (e.charCodeAt(0) + 65536).toString(16).substr(1)
    }
    return MyShareInstall.channelRedirect = function(e, t) {
        new MyShareInstall({
            appKey: e,
            channelCode: t,
            _channelRedirect: !0
        }).wakeupOrInstall()
    },
    MyShareInstall.parseUrlParams = function(e) {
        var t = (e = e || win.location.href).indexOf("?") + 1,
        n = (e || "?").substring(t).replace(/\+/g, "%20"),
        a = n.indexOf("#");
        0 <= a && (n = n.substring(0, a));
        for (var r = n.split("&"), o = {},
        i = 0; i < r.length; i++) {
            var l = r[i].split("="),
            c = decodeURIComponent(l[0] || ""),
            s = decodeURIComponent(l[1] || "");
            c && s && (void 0 === o[c] ? o[c] = s: "object" == typeof o[c] ? o[c].push(s) : o[c] = [o[c], s])
        }
        return o
    },
    MyShareInstall.setUid = function() {
        return + new Date + Math.random().toString(10).substring(2, 6)
    },
    MyShareInstall.setCookie = function(e, t) {
        var n = new Date;
        n.setTime(n.getTime() + 2592e6),
        document.cookie = e + "=" + encodeURI(t) + ";expires=" + n.toUTCString() + ";path=/"
    },
    MyShareInstall.getCookie = function(e) {
        var t, n = new RegExp("(^| )" + e + "=([^;]*)(;|$)");
        return (t = document.cookie.match(n)) ? decodeURI(t[2]) : null
    },
    MyShareInstall.generateUUID = function() {
        var n = (new Date).getTime();
        window.performance && "function" == typeof window.performance.now && (n += performance.now());
        var e = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
        function(e) {
            var t = (n + 16 * Math.random()) % 16 | 0;
            return n = Math.floor(n / 16),
            ("x" == e ? t: 3 & t | 8).toString(16)
        });
        return localStorage.setItem("visitUUID", e),
        e
    },
    MyShareInstall.getOsType = function() {
        var e = "";
        return Os.ios ? e = "ios": Os.android && (e = "android"),
        e
    },
    MyShareInstall.getOsVersion = function() {
        var e = "",
        t = navigator.userAgent.toLowerCase();
        return Os.android ? e = t.match(/android\s([0-9.]*)/)[1] : Os.ios && (0 < t.indexOf("like mac os") ? e = t.match(/os (.*?) like mac os/)[1].replace(/_/g, ".") : 0 < t.indexOf("macintosh") && (e = t.match(/mac os x (.*?)\)/)[1].replace(/_/g, "."))),
        e
    },
    MyShareInstall.url2json = function(e) {
        for (var t, n = e.substring(e.indexOf("?") + 1, e.length).split("&"), a = {},
        r = 0; t = n[r]; r++) {
            var o = t.substring(0, t.indexOf("=")).toLowerCase(),
            i = t.substring(t.indexOf("=") + 1, t.length); - 1 < i.indexOf("#") && (i = i.split("#")[0]),
            a[o] = i
        }
        return a
    },
    MyShareInstall.logAjax = function(n, a, r) {
        var e = "";
        MyShareInstall.getCookie("ShareInstallUid") ? e = MyShareInstall.getCookie("ShareInstallUid") : (e = MyShareInstall.setUid(), MyShareInstall.setCookie("ShareInstallUid", e));
        var t = "https://statlog.shareinstall.com/shareinstall_log/si?ordernumber=" + e + "&" + window.logData;
        httpAjax({
            url: "https://statlog.shareinstall.com/shareinstall_log/si",
            type: "POST",
            data: MyShareInstall.url2json(t),
            async: !1,
            success: function() {},
            fail: function() {}
        }),
        setTimeout(function() {
            var e = r.preferWakeup,
            t = r.preferInstall;
            null != e && "" !== e || (e = !0),
            null != t && "" !== t || (t = !0),
            n(e, t, a)
        })
    },
    MyShareInstall.domainPath = "æˆ‘æ˜¯åˆå§‹åŒ–æ•°æ®...",
    MyShareInstall.docReady = docReady,
    MyShareInstall
} (window, document, XMLHttpRequest),
"object" == typeof module && module.exports && (module.exports = window.ShareInstall);
